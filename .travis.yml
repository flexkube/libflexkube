language: go

go:
  - '1.15.6'
  - master

git:
  depth: 1

notifications:
  email: false

matrix:
  allow_failures:
    - go: master

install: make download

before_script:
  - make install-ci

script:
  - make all-cover

after_script:
  - make test-cover-upload EXIT_CODE=$TRAVIS_TEST_RESULT
